<!doctype html> <html class=no-js lang=en> <head> <title>Lightning Fast Page Cache Using PHP and Memcache</title> <meta charset=utf-8 /> <meta name=viewport content="width=device-width, initial-scale=1.0"/> <meta name=google-site-verification content=lC7-hHwqtiRqo7YTHc1fJ6t8ie-Hs7J4o5u3XRIF9Vw /> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="/stylesheets/app.css" media=screen rel=stylesheet /> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-836728-7', 'sourcey.com');
      ga('send', 'pageview');
    </script> </head> <body class="article page-cache-using-php-and-memcache page-cache-using-php-and-memcache_index"> <nav class=top-bar data-topbar=""> <div class=top-bar-inner> <div id=social> <a href="https://plus.google.com/+SourceyDevel"><i class="fi-social-google-plus large"></i></a> <a href="https://facebook.com/sourceydevel"><i class="fi-social-facebook large"></i></a> <a href="https://twitter.com/sourceydevel"><i class="fi-social-twitter large"></i></a> <a href="https://github.com/sourcey"><i class="fi-social-github large"></i></a> </div> <ul class=title-area> <li class=name></li> <li class="toggle-topbar menu-icon"><a href="" class=left></a></li> </ul> <section class=top-bar-section style="left: 0%;"> <ul class=left> <li class=home><a href="/">Home</a></li> <li class=has-dropdown><a href="/#projects">Projects</a> <ul class=dropdown><li class="title back js-generated"><h5><a href="javascript:void(0)">Back</a></h5></li> <li> <a href="/libsourcey"><b>LibSourcey</b><small>C++ networking evolved</small></a> </li> <li> <a href="/anionu"><b>Anionu</b><small>Cloud video surveillance</small></a> </li> <li> <a href="//stompstart.com"><b>StompStart</b><small>Promote your startup</small></a> </li> <li> <a href="/symple"><b>Symple</b><small>Messaging made Symple</small></a> </li> <li> <a href="/mesh"><b>Mesh</b><small>Elegant, modern design</small></a> </li> <li> <a href="/pacm"><b>Pacm</b><small>Redistributable package manager</small></a> </li> <li> <a href="/pluga"><b>Pluga</b><small>C++ plugin system</small></a> </li> </ul> </li> <li class=has-dropdown><a href="/#articles">Articles</a> <ul class=dropdown> <li><a href="/archives">Archives</a></li> <li><a href="/feed.xml">Feed</a></li> </ul> </li> <li><a href="mailto:hello@sourcey.com">Contact</a></li> <li class=divider></li> </ul> </section> </div> </nav> <header id=header> <h1 id=logo> <a title=Sourcey rel=home href="//sourcey.com"><img height=150 width=150 title=Sourcey alt=Sourcey src="/images/logos/sourcey-glow-250x250.png"/></a> </h1> </header> <div id=main role=main> <article> <header class=article-header> <h1>Lightning Fast Page Cache Using PHP and Memcache</h1> <h2 class=subtitle>Have Your Cache And Eat It Too!</h2> <div class=meta> By <a rel="author external" href="https://plus.google.com/+KamLow">Kam Low</a> &diams; <time class=updated datetime="Aug 29 2014">Aug 29 2014</time> </div> </header> <div class="article-wrap row"> <div class="large-8 columns"> <div class=content> <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p>In this article I’m going to introduce a simple page caching system that we use on some mission critical websites to massively reduce resource requirements and page load speed.</p> <p>As you probably know the fastest and best way to serve a website is using static HTML, but theres a multitude reasons why thats just not feasible for larger or dynamic websites. Our page caching system is built with the static website methodology in mind, so it retains the benefits of static HTML, while still allowing for dynamic content to be regenerated periodically or on demand.</p> <p>The basic concept is that generated HTML pages are stored in RAM using Memcache. This way if cache is available, then all we need to serve the page is a single <code>Memcache.get()</code> call and output the content. In this case we should be able to render the page and close the connection in under 5ms, which is ideal for uber-fast event-based server architectures like Nginx.</p> <p>HTML pages are cached long-term, which provides redundancy by ensuring the site stays up even if multiple front-end or database servers fail.</p> <p>The generated HTML is stored in a serialised array along with an short-term expiry timestamp. When the short-term timestamp expires the cache is flagged as invalid, and should be regenerated by the implementation whenever possible - generally on the next page request, or possibly by a background task. If the cache cannot be regenerated for some reason, the long-term cached content is still available and can be displayed to the user as a fallback.</p> <p>There are a couple of gotchas to consider when using this method:</p> <ul> <li>There needs to be enough RAM available to store all your cached pages.</li> <li>Generated HTML pages cannot exceed 1.2mb as that’s the Memcache limit (hopefully you’re not doing this!).</li> </ul> <p>The code itself is very simple, but the function it serves is invaluable:</p> <pre><code class="highlight php">// config.php

<span class="cp">&lt;?php</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">'MEMCACHE_SERVER'</span><span class="p">,</span> <span class="s1">'127.0.0.1'</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre> <pre><code class="highlight php">// memcache.php

<span class="cp">&lt;?php</span>
<span class="k">include_once</span> <span class="s1">'config.php'</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">MemcacheAPI</span> <span class="p">{</span>
    <span class="k">public</span> <span class="nv">$server</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$cache</span><span class="p">;</span>
    <span class="k">public</span> <span class="nv">$error</span><span class="p">;</span>
    
    <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$server</span> <span class="o">=</span> <span class="k">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$server</span> <span class="o">==</span> <span class="k">NULL</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span> <span class="o">=</span> <span class="nx">MEMCACHE_SERVER</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span> <span class="o">=</span> <span class="nv">$server</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Memcache</span><span class="p">();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nb">explode</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$ip</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span><span class="o">-&gt;</span><span class="na">addServer</span><span class="p">(</span><span class="nb">trim</span><span class="p">(</span><span class="nv">$ip</span><span class="p">),</span> <span class="mi">11211</span><span class="p">);</span>
        <span class="p">}</span>
            
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">error</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">get</span><span class="p">(</span><span class="nv">$hash</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">==</span> <span class="s1">'pendingquery'</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="nv">$x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$x</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nv">$x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// result is pending try again every 250 
</span>                <span class="c1">// milliseconds for max of 10 times.
</span>                <span class="nb">usleep</span><span class="p">(</span><span class="mi">250000</span><span class="p">);</span>
                <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$hash</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">&lt;&gt;</span> <span class="s1">'pendingquery'</span><span class="p">)</span> <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">error</span> <span class="o">=</span> <span class="s1">'Timed out'</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">set</span><span class="p">(</span><span class="nv">$hash</span><span class="p">,</span> <span class="nv">$content</span><span class="p">,</span> <span class="nv">$expire</span> <span class="o">=</span> <span class="mi">300</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$hash</span><span class="p">,</span> <span class="nv">$content</span><span class="p">,</span> <span class="nx">MEMCACHE_COMPRESSED</span><span class="p">,</span> <span class="nv">$expire</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">TRUE</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre> <pre><code class="highlight php">// pagecache.php

<span class="cp">&lt;?php</span>
<span class="k">include_once</span> <span class="s1">'memcache.php'</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">PageCache</span> <span class="p">{</span>
    <span class="k">const</span> <span class="no">DEFAULT_EXPIRY</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span> <span class="c1">// 5 minutes
</span>    <span class="k">const</span> <span class="no">DEFAULT_LIFETIME</span> <span class="o">=</span> <span class="mi">259200</span><span class="p">;</span> <span class="c1">// 3 days
</span>
    <span class="k">public</span> <span class="nv">$key</span><span class="p">;</span>      <span class="c1">// the cache key
</span>    <span class="k">public</span> <span class="nv">$expiry</span><span class="p">;</span>   <span class="c1">// the duration of time before the page becomes invalid
</span>    <span class="k">public</span> <span class="nv">$lifetime</span><span class="p">;</span> <span class="c1">// the duration of time the page will exist in cache
</span>    <span class="k">public</span> <span class="nv">$invalid</span><span class="p">;</span>  <span class="c1">// weather or not the page should be regenerated
</span>    <span class="k">public</span> <span class="nv">$cache</span><span class="p">;</span>    <span class="c1">// memcache pointer
</span>    <span class="k">public</span> <span class="nv">$debug</span><span class="p">;</span>    <span class="c1">// display debug output
</span>
    <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$basekey</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MemcacheAPI</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">key</span> <span class="o">=</span> <span class="nv">$basekey</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">expiry</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">DEFAULT_EXPIRY</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lifetime</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">DEFAULT_LIFETIME</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invalid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">debug</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>    
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">get</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">';Get cache: '</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">key</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">key</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$result</span> <span class="o">=</span> <span class="nb">unserialize</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
            <span class="nv">$invalidAt</span> <span class="o">=</span> <span class="nb">intval</span><span class="p">(</span><span class="nv">$result</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">debug</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">echo</span> <span class="s1">';Cache expires in: '</span><span class="o">.</span><span class="p">(</span><span class="nv">$invalidAt</span> <span class="o">-</span> <span class="nb">time</span><span class="p">());</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">time</span><span class="p">()</span> <span class="o">&gt;</span> <span class="nv">$invalidAt</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">debug</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">echo</span> <span class="s1">';Invalidated cache'</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invalid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">resessionize</span><span class="p">(</span><span class="nv">$result</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">function</span> <span class="nf">set</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$arr</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="nb">time</span><span class="p">()</span> <span class="o">+</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">expiry</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">desessionize</span><span class="p">(</span><span class="nv">$data</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">';Set cache: '</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">key</span><span class="o">.</span><span class="s1">': '</span><span class="o">.</span><span class="nv">$arr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="s1">': '</span><span class="o">.</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">expiry</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cache</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nb">md5</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">key</span><span class="p">),</span> <span class="nb">serialize</span><span class="p">(</span><span class="nv">$arr</span><span class="p">),</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lifetime</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre> <p>An example implementation with a manual cache override might look something like this:</p> <pre><code class="highlight php"><span class="cp">&lt;?php</span>
<span class="k">include_once</span> <span class="s1">'pagecache.php'</span><span class="p">;</span>

<span class="c1">// handle input parameters
</span><span class="nv">$invalidate</span> <span class="o">=</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'invalidate'</span><span class="p">]))</span> <span class="o">?</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'invalidate'</span><span class="p">]</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
<span class="nv">$debug</span> <span class="o">=</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'debug'</span><span class="p">])</span> <span class="o">?</span> <span class="p">(</span><span class="nx">bool</span><span class="p">)</span><span class="nv">$_GET</span><span class="p">[</span><span class="s1">'debug'</span><span class="p">]</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// initialise page cache
</span><span class="nv">$timestart</span> <span class="o">=</span> <span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nv">$pagecache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PageCache</span><span class="p">(</span><span class="s1">'index'</span><span class="p">);</span>
<span class="nv">$pagecache</span><span class="o">-&gt;</span><span class="na">debug</span> <span class="o">=</span> <span class="nv">$debug</span><span class="p">;</span>
<span class="nv">$content</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="c1">// if cache is available and current we print and exit straight away
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$invalidate</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$content</span> <span class="o">=</span> <span class="nv">$pagecache</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$content</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nv">$pagecache</span><span class="o">-&gt;</span><span class="na">invalid</span> <span class="o">!==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$debug</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">';Output cache: '</span><span class="o">.</span><span class="nv">$pagecache</span><span class="o">-&gt;</span><span class="na">key</span><span class="o">.</span><span class="s1">': '</span><span class="o">.</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">-</span> <span class="nv">$timestart</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="s1">'ms'</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">echo</span> <span class="nv">$content</span><span class="p">;</span>
        <span class="k">exit</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// start the page rendering block
</span><span class="k">try</span> <span class="p">{</span>

    <span class="c1">// render the page content HTML
</span>    <span class="nv">$content</span> <span class="o">=</span> <span class="nx">renderPageHTML</span><span class="p">();</span>

    <span class="c1">// update page cache with fresh content
</span>    <span class="nv">$pagecache</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// there was a problem rendering the page, notify the sysadmin
</span>    <span class="k">echo</span> <span class="s1">';Caught exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// print the newly rendered page or long-term cache depending on availability
</span><span class="k">if</span> <span class="p">(</span><span class="nv">$content</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$debug</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">';Output rendered content: '</span><span class="o">.</span><span class="nv">$pagecache</span><span class="o">-&gt;</span><span class="na">key</span><span class="o">.</span><span class="s1">': '</span><span class="o">.</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">microtime</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">-</span> <span class="nv">$timestart</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="mi">1000</span><span class="p">)</span><span class="o">.</span><span class="s1">'ms'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">echo</span> <span class="nv">$content</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">';Failed to render page'</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre> </body></html> </div> </div> <div class="large-4 columns"> <div class=sidebar> <div class="sidebar-section tags"> <h4>Tags</h4> <ul><li><a href="/tags/programming/">Programming</a></li><li><a href="/tags/caching/">Caching</a></li><li><a href="/tags/php/">PHP</a></li><li><a href="/tags/memcache/">Memcache</a></li></ul> </div> <div class="sidebar-section ad ad-300x250 sidebar-float"> <ins class=adsbygoogle style="display:inline-block;width:300px;height:600px" data-ad-client=ca-pub-1397369873900370 data-ad-slot=7510590887></ins> <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script> </div> </div> </div> </article> <ul class=social-buttons> <li> <a href="//twitter.com/share" class="socialite twitter-share" data-text="Lightning Fast Page Cache Using PHP and Memcache" data-url="http://sourcey.com/page-cache-using-php-and-memcache/" data-count=vertical rel=nofollow target=_blank><span class=vhidden>Share on Twitter</span></a> </li> <li> <a href="https://plus.google.com/share?url=http://sourcey.com/page-cache-using-php-and-memcache/" class="socialite googleplus-one" data-size=tall data-href="//sourcey.com/page-cache-using-php-and-memcache/" rel=nofollow target=_blank><span class=vhidden>Share on Google+</span></a> </li> <li> <a href="//www.facebook.com/sharer.php?u=http://sourcey.com/page-cache-using-php-and-memcache/&amp;t=Lightning Fast Page Cache Using PHP and Memcache" class="socialite facebook-like" data-href="http://sourcey.com/page-cache-using-php-and-memcache/" data-send=false data-layout=box_count data-width=60 data-show-faces=false rel=nofollow target=_blank><span class=vhidden>Share on Facebook</span></a> </li> <li> <a href="//www.linkedin.com/shareArticle?mini=true&amp;url=http://sourcey.com/page-cache-using-php-and-memcache/&amp;title=Lightning Fast Page Cache Using PHP and Memcache" class="socialite linkedin-share" data-url="http://sourcey.com/page-cache-using-php-and-memcache/" data-counter=top rel=nofollow target=_blank><span class=vhidden>Share on LinkedIn</span></a> </li> </ul> <div class="row show-for-large-up"> <div class="ad ad-720x90 text-center"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class=adsbygoogle style="display:inline-block;width:728px;height:90px" data-ad-client=ca-pub-1397369873900370 data-ad-slot=8042301285></ins> <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
          </script> </div> </div> <div id=disqus_thread></div> <script>
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'sourcey'; // required: replace example with your forum shortname

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script> <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel=nofollow>comments powered by Disqus.</a></noscript> <a href="//disqus.com" rel=nofollow class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </div> <footer id=footer> <div class="ad ad-320x50 text-center"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class=adsbygoogle style="display:inline-block;width:320px;height:50px" data-ad-client=ca-pub-1397369873900370 data-ad-slot=1856166884></ins> <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script> </div> <p> As with all business minded artists, we have fought the inevitable battle of conformity vs expression, and have emerged victorious with sanity intact to plunder the digiverse in search of new and interesting challenges. For more information, or a quote, drop us an email and tell us what you're working on. </p> <p> &copy;2014 Sourcey <p> </footer> </body> </html> <script src="/javascripts/all.js"></script>