<!doctype html> <html class=no-js lang=en> <head> <title>LibSourcey | Sourcey</title> <meta charset=utf-8 /> <meta name=viewport content="width=device-width, initial-scale=1.0"/> <meta name=google-site-verification content=lC7-hHwqtiRqo7YTHc1fJ6t8ie-Hs7J4o5u3XRIF9Vw /> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="/stylesheets/app.css" media=screen rel=stylesheet /> <script src="/javascripts/all.js"></script> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-836728-7', 'sourcey.com');
      ga('send', 'pageview');
    </script> </head> <body class="page libsourcey libsourcey_index"> <nav class=top-bar data-topbar=""> <div class=top-bar-inner> <div id=social> <a href="https://github.com/sourcey"><i class=fi-social-github></i></a> <a href="https://twitter.com/sourceydevel"><i class=fi-social-twitter></i></a> <a href="https://plus.google.com/+SourceyDevel"><i class=fi-social-google-plus></i></a> <a href="https://facebook.com/sourceydevel"><i class=fi-social-facebook></i></a> </div> <ul class=title-area> <li class=name></li> <li class="toggle-topbar menu-icon"><a href="#" class=left></a></li> </ul> <section class=top-bar-section style="left: 0%;"> <ul class=left> <li class=home><a href="/">Home</a></li> <li class=has-dropdown><a href="/#projects">Projects</a> <ul class=dropdown><li class="title back js-generated"><h5><a href="javascript:void(0)">Back</a></h5></li> <li> <a href="/libsourcey"><b>LibSourcey</b><small>C++ networking evolved</small></a> </li> <li> <a href="/anionu"><b>Anionu</b><small>Cloud video surveillance</small></a> </li> <li> <a href="http://stompstart.com"><b>StompStart</b><small>Promote your startup</small></a> </li> <li> <a href="/symple"><b>Symple</b><small>Messaging made Symple</small></a> </li> <li> <a href="/mesh"><b>Mesh</b><small>Elegant, modern design</small></a> </li> <li> <a href="/pacm"><b>Pacm</b><small>Redistributable package manager</small></a> </li> <li> <a href="/pluga"><b>Pluga</b><small>C++ plugin system</small></a> </li> <li> <a href="http://avidsense.com"><b>Avid Sense</b><small>Freedom of expression</small></a> </li> <li> <a href="/recliner"><b>Recliner.js</b><small>Flexible lazy loading</small></a> </li> </ul> </li> <li class=has-dropdown><a href="/#articles">Articles</a> <ul class=dropdown> <li><a href="/archives">Archives</a></li> <li><a href="/feed.xml">Feed</a></li> </ul> </li> <li><a href="mailto:hello@sourcey.com">Contact</a></li> <li class=divider></li> </ul> </section> </div> </nav> <div id=main role=main> <article> <header class=article-header> <h1>LibSourcey</h1> </header> <div class="article-wrap row"> <div class="large-9 columns"> <div class=content> <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <dl class=status> <dt>Repository</dt> <dd><a href="https://github.com/sourcey/libsourcey">https://github.com/sourcey/libsourcey</a></dd> <dt>Licence</dt> <dd>LGPL, <a href=licence>Pro Licence</a> </dd> <dt>Required Dependencies</dt> <dd>libuv, CMake, C++11 compiler</dd> <dt>Optional Dependencies</dt> <dd>FFmpeg (&gt;= 2.8.3), OpenCV (&gt;= 3.0), WebRTC, OpenSSL (&gt; 1.0.1g), RtAudio, JsonCpp</dd> </dl> <p><img alt="LibSourcey Logo" title="LibSourcey Logo" class=align-left src="/images/logos/libsourcey-120x120.png"> LibSourcey is a collection of open source cross platform C++11 modules and classes that provide developers with a flexible high performance arsenal for the rapid development of real-time messaging and live media streaming applications.</p> <p>LibSourcey is built on top of Node.js’s underlying libuv library and utilises event-based asynchronous IO in to maximise performance and minimise concurrency reliance for building mission critical server-side applications. Modern C++11 design principles have been adhered to throughout for clear and readable code, and straighforward integration into existing projects.</p> <p>For media streaming applications, LibSourcey provides a simple and flexible method of capturing live audio/video streams (<em>OpenCV/FFmpeg</em>), processing, filtering and encoding them using any video format (<em>FFmpeg</em>), and broadcasting the result over the Internet (<em>libuv</em>). This is made possible by implementing a thin layer over the top of some brilliant open source projects, such as FFmpeg, OpenCV and libuv. The only required third-party dependency is libuv, and that is included in the local source and compiled automatically. All others dependencies are optional.</p> <p>Unfortunately documentation still a little sparse at this point, but we hope to change that in the near future. Until then, <em>use the source, Luke!</em>, and we welcome all community contributions to LibSourcey in order to promote the development of better real-time native and web applications</p> <p>LibSourcey provides full support for the following protocols: <strong>TCP</strong>, <strong>SSL</strong>, <strong>UDP</strong>, <strong>HTTP</strong>, <strong>JSON</strong>, <strong>XML</strong>, <strong>STUN</strong>, <strong>SDP</strong>, <strong>SocketIO</strong>.<br> Partial support is provided for the following protocols: <strong>WebSockets</strong>, <strong>TURN</strong>, <strong>ICE</strong>, <strong>RTP</strong>, and <strong>XMPP</strong>.</p> <h2 id=features>Features</h2> <ul> <li> <p><strong>Event-based IO</strong> — Core modules are built on top of <code>libuv</code> (the underlying C library that powers Node.js) and use event-based asynchronous IO throughout to maximise performance and minimise concurrency reliance for building mission critical native and server side apps.</p> </li> <li> <p><strong>Cross platform</strong> — The codebase is cross platform and should compile on any system with access to a modern C++11 compiler. We have successfully compiled and used LibSourcey on the following platforms: Linux(gcc), Mac(Xcode, gcc), Windows(msys, vs), Android and iOS.</p> </li> <li> <p><strong>Clean readable code</strong> — Modern C++11 design principles have been used for clear and readable code. Libraries are modular for simple integration into your existing projects.</p> </li> <li> <p><strong>Networking layer</strong> — The networking layer provides TCP, SSL and UDP socket implementations that combine the use of <code>libuv</code> for blazing fast networking, and <code>openssl</code> for security and encryption.</p> </li> <li> <p><strong>Media streaming and encoding</strong> — The <code>av</code> library consists of thin wrappers around FFmpeg and OpenCV for media capture, encoding, recording, streaming, analysis and more. The media API makes full use of the PacketStream API so that encoders, processors and broadcasters can be dynamically added and removed from any media source - a great base for building a <a href="https://github.com/sourcey/libsourcey/tree/master/src/av/samples/mediaserver">media server</a>.</p> </li> <li> <p><strong>Elegant PacketStream API</strong> — The PacketStream API allows LibSourcey modules to pipe and process arbitrary data packets through a dynamic delegate chain. This dynamic method of layering packet processors makes it possible to develop complex data processing applications quickly and easily. Check out this writeup on how the PacketSteram API can be used to easily encode H.264 on the fly: http://sourcey.com/libsourcey-packetstream-api/</p> </li> <li> <strong>Realtime messaging</strong> — LibSourcey aims to bridge the gap between desktop, mobile and web by providing performance oriented messaging solutions that work across all platforms. <ul> <li> <strong>Socket.IO</strong> — Socket.IO C++ client that supports the latest protocol revision 4 (&gt;- 1.0). Read more about <a href="http://socket.io">Socket.IO</a>.</li> <li> <strong>Symple</strong> — Sourcey’s home grown realtime messaging protocol that works over the top of Socket.IO to provide rostering, presence and many other features necessary for building online games and chat applications. <a href="&amp;lt;http://sourcey.com/symple">More about Symple</a>.</li> </ul> </li> <li> <p><strong>WebRTC support</strong> — WebRTC support allows you to build WebRTC native desktop and server side applications that inherit LibSourcey’s realtime messaging and media capabilities. Two demo applications are included; one for streaming live webcam and microphone streams to the browser <a href="https://github.com/sourcey/libsourcey/tree/master/src/webrtc/samples/webrtcstreamer">here</a>, and one for multiplex recording live WebRTC streams from the browser on the server side <a href="https://github.com/sourcey/libsourcey/tree/master/src/webrtc/samples/webrtcrecorder">here</a>.</p> </li> <li> <p><strong>Web servers and clients</strong> — A HTTP stack is included that supports HTTP servers, clients, WebSockets, media streaming, file transfers, and authentication. The HTTP parser is based on the super-fast C code used by <code>nginx</code>.</p> </li> <li> <strong>Full ICE stack</strong> — The ICE module is a complete implementation of <a href="http://tools.ietf.org/html/rfc5245">RFC 5245 (Interactive Connectivity Establishment)</a> based on LibSourcey architecture. <ul> <li> <strong>STUN</strong> — <a href="http://tools.ietf.org/rfc/rfc5389">RFC 5389</a> implementation that includes support for ICE and TURN and TURN TCP messages.</li> <li> <strong>TURN</strong> — Server and client stack that supports both <a href="http://tools.ietf.org/rfc/rfc5766">RFC 5766 (Traversal Using Relays around NAT)</a> and <a href="http://tools.ietf.org/rfc/rfc6062">RFC 6062 (Traversal Using Relays around NAT Extensions for TCP Allocations)</a> specifications.</li> <li> <strong>SDP</strong> — <a href="http://tools.ietf.org/rfc/rfc4566">RFC 4566</a> implementation that includes extra support for ICE headers.</li> </ul> </li> </ul> <h2 id=dependencies>Dependencies</h2> <ul> <li> <strong>LibUV</strong> (required, &gt;= 1.8.0) Networking, filesystem and cross platform utilities</li> <li> <strong>OpenSSL</strong> (required, &gt;= 1.0.1g) SSL networking layer and encryption</li> <li> <strong>FFmpeg</strong> (optional, &gt;= 2.8.3) Media encoding and streaming</li> <li> <strong>WebRTC</strong> (optional) Peer-to-peer video conferencing</li> <li> <strong>OpenCV</strong> (optional, &gt;= 3.0) Video capture and computer vision algorithms</li> </ul> <h2 id=installation>Installation</h2> <p>LibSourcey uses <code>CMake</code> to build the project files for the compiler on your platform, and should build on any system with a modern C++11 compiler.</p> <p><em>Note:</em> To compile LibSourcey with video and streaming capabilities enabled you should install the latest version of both <code>FFmpeg</code> and <code>OpenCV</code>, otherwise modules and features dependent on those libraries will be disabled by default.</p> <h3 id=installing-on-linux>Installing on Linux</h3> <p>This guide is written for Ubuntu 14.04, although installation should be fairly portable across most flavours of Linux.</p> <h5 id=install-dependencies>Install Dependencies</h5> <pre class="highlight shell"><code>sudo apt-get update
sudo apt-get install -y build-essential pkg-config git cmake openssl libssl-dev
</code></pre> <p><strong>Install FFmpeg (optional):</strong></p> <p>FFmpeg is an optional but recommended dependency that’s required to make use of LibSourcey’s media encoding capabilities.</p> <p>Most versions on Linux have FFmpeg development libraries that you can install directly from the package manager. If you’re on a newer version of Ubuntu (&gt;= 15.04) then you can install the required libraries as follows:</p> <pre class="highlight shell"><code>sudo apt-get install --yes libavcodec-ffmpeg-dev libavdevice-ffmpeg-dev libavfilter-ffmpeg-dev libavformat-ffmpeg-dev libswresample-ffmpeg-dev libpostproc-ffmpeg-dev
</code></pre> <p>Otherwise if you want to compile FFmpeg yourself you can follow the <a href="http://trac.ffmpeg.org/wiki/CompilationGuide">official guide for installing FFmpeg</a> that works out of the box with LibSourcey.</p> <p><strong>Install WebRTC (optional):</strong></p> <p>Installing WebRTC can be tricky and time consuming, but using the script below you should be able to get started without a hitch. Using the script is highly recommended as there are a few caveats to take note of when compiling WebRTC for use with LibSourcey:</p> <ol> <li>RTTI must be enabled (the -no_rtti compiler flag must be removed)</li> <li>The WebRTC static library must not contain JsonCpp (it conflicts with our newer internal version)</li> <li>libstdc++ iterator debugging must be disabled or it conflicts with external dependencies compiled without it (ninja build must set <code>enable_iterator_debugging=false</code>)</li> </ol> <pre class="highlight shell"><code><span class="nb">cd</span> ~/tmp
git clone git@github.com:sourcey/webrtcbuilds.git
<span class="nb">cd </span>webrtcbuilds
./build.sh -l jsoncpp -e
</code></pre> <h5 id=install-libsourcey>Install LibSourcey</h5> <pre class="highlight shell"><code><span class="nb">cd</span> ~/tmp
git clone https://github.com/sourcey/libsourcey.git
<span class="nb">cd </span>libsourcey
mkdir build
<span class="nb">cd </span>build
cmake .. -DCMAKE_BUILD_TYPE<span class="o">=</span>RELEASE <span class="c"># extra cmake commands here, see below for a full list...</span>
make
sudo make install
</code></pre> <p>All done!</p> <p><a href="#cmake-build-options">See here</a> for a complete list of build options, and <a href="#examples">here for examples</a>.</p> <h3 id=installing-on-apple-os-x>Installing on Apple (OS X)</h3> <p>This guide is for written for Mac users using <a href="http://brew.sh">Homebrew</a>.</p> <h5 id=install-dependencies-1>Install Dependencies</h5> <pre class="highlight shell"><code><span class="c"># OpenSSL:</span>
brew install openssl
brew link --force openssl

<span class="c"># CMake:</span>
brew install cmake
</code></pre> <p>Please see the <a href="#installing-on-linux">Linux instructions</a> for other optional dependencies. </p> <h5 id=install-libsourcey-1>Install LibSourcey</h5> <pre class="highlight shell"><code><span class="nb">cd</span> ~/tmp
git clone https://github.com/sourcey/libsourcey.git
<span class="nb">cd </span>libsourcey
mkdir build
<span class="nb">cd </span>build
cmake .. -D <span class="nv">CMAKE_BUILD_TYPE</span><span class="o">=</span>RELEASE <span class="c"># extra cmake commands here...</span>
make
sudo make install
</code></pre> <h5 id=generate-project-files>Generate Project Files</h5> <p>See linux instructions.</p> <p><a href="#cmake-build-options">See here</a> for a complete list of build options, and <a href="#examples">here for examples</a>.</p> <h5 id=compile-with-xcode>Compile with Xcode</h5> <h3 id=installing-on-windows>Installing on Windows</h3> <h5 id=install-dependencies-2>Install Dependencies</h5> <p><strong>Install Git</strong></p> <p>Install <a href="http://code.google.com/p/tortoisegit/">TortoiseGit</a>, a convenient git front-end that integrates right into Windows Explorer. MinGW users can use <a href="http://code.google.com/p/msysgit/downloads/list">msysgit</a>.</p> <p><strong>Install CMake</strong></p> <p>CMake generates the LibSourcey project files so you can build on most platforms and compilers. <a href="http://www.cmake.org/cmake/resources/software.html">Download CMake</a></p> <p><strong>Install OpenSSL</strong></p> <p>Download and install the <a href="http://slproweb.com/products/Win32OpenSSL.html">Windows OpenSSL binaries</a>.</p> <p><strong>Download LibSourcey</strong></p> <p>Clone the repository: <code>git clone https://github.com/sourcey/libsourcey.git</code>. If you haven’t got Git for some reason you can download and extract the <a href="https://github.com/sourcey/libsourcey">package archive</a> from Github.</p> <h5 id=generate-project-files-1>Generate Project Files</h5> <p>Open the CMake GUI and set the project directory to point to the LibSourcey root directory. Execute “Configure” to do the initial configuration, then adjust any options, then press “Configure” again and then press “Generate”.</p> <p><a href="#cmake-build-options">See here</a> for a complete list of build options, and <a href="#examples">here for examples</a>.</p> <h5 id=compile-with-visual-studio>Compile with Visual Studio</h5> <ol> <li>Generate solutions using CMake, as described above. Make sure, you chose the proper generator (32-bit or 64-bit)</li> <li>Launch Visual Studio, locate and open the “libsourcey.sln” solution file in your generated build folder (eg: <code>C:\LibSourcey\build\libsourcey.sln</code>). Select “Debug” configuration, build the solution (Ctrl-Shift-B), and/or select “Release” and build it.</li> <li>Add <code>{CMAKE_BINARY_DIR}\bin\Release</code>, <code>{CMAKE_BINARY_DIR}\bin\Debug</code> (containing “libscy<em>.dll” and “libscy</em>d.dll”, respectively) to the system path (My Computer–[Right button click]-&gt;Properties-&gt;Advanced-&gt;Environment Variables-&gt;Path)</li> </ol> <h2 id=cmake-build-options>CMake Build Options</h2> <p>The main build options you will want to configure are as follows:</p> <ul> <li> <code>BUILD_SHARED_LIBS</code>: Build shared libraries (.dll/.so) instead of static ones (.lib/.a). <em>default: NOT (WIN32 OR ANDROID OR IOS)</em> </li> <li> <code>BUILD_DEPENDENCIES</code>: Build LibSourcey in source third-party dependencies. <em>default: ON</em> </li> <li> <code>BUILD_MODULES</code>: Build LibSourcey modules. <em>default: ON</em> </li> <li> <code>BUILD_MODULE_xxx</code>: Enable or disable a specific module replacing <em>xxx</em> with the module name.</li> <li> <code>BUILD_APPLICATIONS</code>: Build LibSourcey modules <em>default: ON</em> </li> <li> <code>BUILD_APPLICATION_xxx</code>: Enable or disable a specific applications replacing <em>xxx</em> with the module name.</li> <li> <code>BUILD_MODULE_TESTS</code>: Build module test applications <em>default: ON</em> </li> <li> <code>BUILD_MODULES_xxx</code>: Enable or disable a specific module replacing xxx with the module name.</li> <li> <code>BUILD_MODULE_SAMPLES</code>: Build module sample applications <em>default: ON</em> </li> </ul> <p>If you are using third-party libraries is custom locations then make sure you update the CMake include paths: <code>CMAKE_SYSTEM_PREFIX_PATH</code> and <code>CMAKE_LIBRARY_PATH</code>. The only third-party libraries that may need configuring if you’re using them are FFmpeg, OpenCV and WebRTC.</p> <p>For an exhaustive list of options check the <code>CMakeLists.txt</code> in the main directory.</p> <h2 id=examples>Examples</h2> <p>There is also plenty of examples available in the <code>samples</code> and <code>tests</code> folder of each module for you to cut your teeth on.</p> <p>If you’re interested in media streaming examples check out the <code>mediaserver</code> sample in the <code>av</code> module. Remember, you will need to compile LibSourcey with FFmpeg enabled to use it: https://github.com/sourcey/libsourcey/tree/master/src/av/samples/mediaserver</p> <p>Two demo WebRTC applications are included; one for streaming live webcam and microphone streams to the browser <a href="https://github.com/sourcey/libsourcey/tree/master/src/webrtc/samples/webrtcstreamer">here</a>, and one for multiplex recording live WebRTC streams from the browser on the server side <a href="https://github.com/sourcey/libsourcey/tree/master/src/webrtc/samples/webrtcrecorder">here</a>.</p> <p>For a redistributable C++ package manager, take a look at <code>pacm</code>, and specifically the <code>pacmconsole</code> application: http://sourcey.com/pacm/</p> <p>Also, check out <code>pluga</code>, a simple C++ plugin API using LibSourcey: http://sourcey.com/pluga/</p> <h2 id=contributing>Contributing</h2> <p>Pull Requests are always welcome, so if you make any improvements please feel free to float them back upstream :)</p> <ol> <li><a href="https://github.com/sourcey/libsourcey">Fork LibSourcey on Github</a></li> <li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li> <li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li> <li>Push to the branch (<code>git push origin my-new-feature</code>)</li> <li>Create new Pull Request</li> </ol> <h2 id=issues>Issues</h2> <p>For bugs and issues please use the <a href="https://github.com/sourcey/libsourcey/issues">Github issue tracker</a>.</p> </body></html> </div> </div> <div class="large-3 columns"> <div class="sidebar sidebar-float"> <div class="sidebar-section toc"> <h4 class=no_toc id=contents>Contents</h4> <ul id=markdown-toc> <li><a id=markdown-toc-features href="#features">Features</a></li> <li><a id=markdown-toc-dependencies href="#dependencies">Dependencies</a></li> <li> <a id=markdown-toc-installation href="#installation">Installation</a> <ul> <li><a id=markdown-toc-installing-on-linux href="#installing-on-linux">Installing on Linux</a></li> <li><a id=markdown-toc-installing-on-apple-os-x href="#installing-on-apple-os-x">Installing on Apple (OS X)</a></li> <li><a id=markdown-toc-installing-on-windows href="#installing-on-windows">Installing on Windows</a></li> </ul> </li> <li><a id=markdown-toc-cmake-build-options href="#cmake-build-options">CMake Build Options</a></li> <li><a id=markdown-toc-examples href="#examples">Examples</a></li> <li><a id=markdown-toc-contributing href="#contributing">Contributing</a></li> <li><a id=markdown-toc-issues href="#issues">Issues</a></li> </ul> </div> </div> </div> </div> </article> </div> <footer id=footer> <div class="row show-for-large-up"> <div class="ad ad-720x90 text-center"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class=adsbygoogle style="display:inline-block;width:728px;height:90px" data-ad-client=ca-pub-1397369873900370 data-ad-slot=8042301285></ins> <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
          </script> </div> </div> <p> As with all business minded artists, we have fought the inevitable battle of conformity vs expression, and have emerged victorious with sanity intact to plunder the digiverse in search of new and interesting challenges. For more information, or a quote, drop us an email and tell us what you're working on. </p> <p>&copy; 2016 Sourcey<p> </footer> </body> </html>