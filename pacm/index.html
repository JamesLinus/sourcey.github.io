<!doctype html>
<html class="no-js" lang="en">
  
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-site-verification" content="lC7-hHwqtiRqo7YTHc1fJ6t8ie-Hs7J4o5u3XRIF9Vw" />
    <title>Pacm</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    
    <script src="/javascripts/modernizr.js" type="text/javascript"></script>
    
    <!-- Google Universal Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-836728-7', 'sourcey.com');
      ga('send', 'pageview');

    </script>
  </head>
      
  <body class="blog pacm pacm_index">
      <nav class="top-bar" data-topbar="">
    <div id="social">
      <a href="https://plus.google.com/+SourceyDevel"><i class="fi-social-google-plus large"></i></a>
      <a href="https://facebook.com/sourceydevel"><i class="fi-social-facebook large"></i></a>
      <a href="https://twitter.com/sourceydevel"><i class="fi-social-twitter large"></i></a>
      <a href="https://github.com/sourcey"><i class="fi-social-github large"></i></a>    
    </div>
      
    <ul class="title-area">
      <li class="name"></li>
      <li class="toggle-topbar menu-icon"><a href="" class="left"><!--Menu--></a></li>
    </ul>
    
    <section class="top-bar-section" style="left: 0%;">      
      <ul class="left">
        <li class="has-dropdown not-click"><a href="/">Menu</a>
          <ul class="dropdown"><li class="title back js-generated"><h5><a href="javascript:void(0)">Back</a></h5></li>
            <li><label>Wicked</label></li>
            <li class="has-dropdown not-click"><a href="/#projects">Projects</a>
              <ul class="dropdown"><li class="title back js-generated"><h5><a href="javascript:void(0)">Back</a></h5></li>
                <li><label>Projects</label></li>
                <li><a href="/libsourcey">LibSourcey</a></li>
                <li><a href="/anionu">Anionu</a></li>
                <li><a href="/symple">Symple</a></li>
                <li><a href="/mesh">Mesh</a></li>
                <li><a href="/pacm">Pacm</a></li>
              </ul>
            </li>
            <li class="divider"></li>
            <li><a href="/#blog">Blog</a></li>
            <li><a href="/archives">Archives</a></li>
            <li><a href="/feed.xml">Feed</a></li>
            <li class="divider"></li>
            <li><a href="mailto:hello@sourcey.com">Contact</a></li>
          </ul>
        </li>
        <li class="divider"></li>
      </ul>
    </section></nav>
    
    <header id="header">
      <h1 id="logo">
        <a title="Sourcey" rel="home" href="http://sourcey.com"><img height="150" width="150" title="Sourcey" alt="Sourcey" src="/images/logo-250.png" /></a>
      </h1>
      <!--<h2 class="site-description">Open Source Developer Collective</h2>-->
    </header>    
    <div id="main" role="main">
      <!--<h1 class="title">Pacm</h1>-->
      <!-- 
TODO: compare to current package managers
 -->

<h1 id="pacm">Pacm</h1>

<dl class="status">
  <dt>Repository</dt>
  <dd><a href="https://github.com/sourcey/pacm">https://github.com/sourcey/pacm</a></dd>
  <dt>Licence</dt>
  <dd>LGPL, <a href="/licence">Pro Licence</a></dd>
  <dt>Dependencies</dt>
  <dd>LibSourcey (base, uv, net, json, http, archo)</dd>
</dl>

<p><img alt="Pacm Logo" title="Pacm Logo" class="align-left" src="/images/pacm-logo-120.png" /> Pacm is a front-end package manager written in C++ that can be embedded or redistributed with native applications to make short work of the following tasks:</p>

<ul>
  <li>Auto-Updates</li>
  <li>Version Constrained Package Management</li>
  <li>Dependency Management</li>
  <li>Remote Plugin Management</li>
</ul>

<p>There are a lot of open source <a href="http://en.wikipedia.org/wiki/List_of_software_package_management_systems">package managers</a> out there, but none of them quite fit the bill for a minimal and flexible native package manager that could be easily distributed with our apps, so we built Pacm.</p>

<p>The Pacm codebase is kept quite small and readable thanks to LibSourcey which handles and abstracts all the complex cross-platform tasks such as networking, filesystem and cryptography.</p>

<p>Pacm speaks to the server using a basic <a href="#client-server-protocol">client-server JSON protocol</a> which is very straight forward to integrate with your existing web server architecture. </p>

<h2 id="embedding-pacm">Embedding Pacm</h2>

<p>If you have some basic C++ nouse then you'll discover that Pacm is very easy to embed and use within your own applications. Some examples of the Pacm API are illustrated below:</p>

<pre class="highlight cpp"><span class="n">PackageManager</span><span class="o">::</span><span class="n">Options</span> <span class="n">options</span><span class="p">;</span>
<span class="c1">// configuration options go here...
</span><span class="n">PackageManager</span> <span class="n">pacm</span><span class="p">(</span><span class="n">options</span><span class="p">);</span>
<span class="n">pacm</span><span class="p">.</span><span class="n">initialize</span><span class="p">();</span>
        
<span class="c1">// query the server for the latest packages
</span><span class="n">pacm</span><span class="p">.</span><span class="n">queryRemotePackages</span><span class="p">();</span>                
        
<span class="c1">// list local (installed) packages
</span><span class="k">auto</span> <span class="n">litems</span> <span class="o">=</span> <span class="n">pacm</span><span class="p">.</span><span class="n">localPackages</span><span class="p">().</span><span class="n">items</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">litems</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">litems</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>        
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Package: "</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// list remote (available) packages
</span><span class="k">auto</span> <span class="n">ritems</span> <span class="o">=</span> <span class="n">app</span><span class="p">.</span><span class="n">remotePackages</span><span class="p">().</span><span class="n">items</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">it</span> <span class="o">=</span> <span class="n">ritems</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">ritems</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>        
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Package: "</span> <span class="o">&lt;&lt;</span> <span class="n">it</span><span class="o">-&gt;</span><span class="n">first</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>          
  
  <span class="c1">// output the latest asset information
</span>  <span class="n">it</span><span class="o">-&gt;</span><span class="n">second</span><span class="o">-&gt;</span><span class="n">latestAsset</span><span class="p">().</span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span> 
<span class="p">}</span>                
        
<span class="c1">// install a package
</span><span class="n">pacm</span><span class="p">.</span><span class="n">installPackage</span><span class="p">(</span><span class="s">"SomePackageName"</span><span class="p">);</span>

<span class="c1">// update a package (will install if it doesn't exist)
</span><span class="n">pacm</span><span class="p">.</span><span class="n">updatePackage</span><span class="p">(</span><span class="s">"SomePackageName"</span><span class="p">);</span>

<span class="c1">// update / install a list of packages.
// package states are available via callback events
</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">packages</span><span class="p">;</span>
<span class="n">packages</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">"SomePackageName"</span><span class="p">);</span>
<span class="n">packages</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="s">"SomeOtherPackage"</span><span class="p">);</span>        
<span class="n">pacm</span><span class="p">.</span><span class="n">installPackages</span><span class="p">(</span><span class="n">packages</span><span class="p">);</span>

<span class="c1">// update all packages
</span><span class="n">pacm</span><span class="p">.</span><span class="n">updateAllPackages</span><span class="p">();</span>

<span class="c1">// uninstall a package.
// uninstallPackages() can also be used for multiple packages.
</span><span class="n">pacm</span><span class="p">.</span><span class="n">uninstallPackage</span><span class="p">(</span><span class="s">"SomePackageName"</span><span class="p">);</span>
</pre>

<p>That covers basic Pacm usage. These are plenty of other methods and features available, just check out the documentation for the method definitions in the <a href="https://github.com/sourcey/pacm/blob/master/include/scy/pacm/packagemanager.h">source code</a> for a reference.</p>

<p>Another great place to start when working with the native API is the <a href="https://github.com/sourcey/pacm/blob/master/applications/pacmconsole/src/main.cpp">Pacm command line tool</a> which can be easily reverse engineered and modified for your own purposes.</p>

<h2 id="redistributable-command-line-tool">Redistributable Command Line Tool</h2>

<p>Pacm comes with a redistributable command-line tool which can be compiled and redistributed with your existing applications. In many ways this is preferable to embedding Pacm as it allows you to decouple complex version management code from your main application.</p>

<h3 id="examples">Examples</h3>

<p>Print help:</p>

<pre class="highlight shell">pacm --help
</pre>

<p>Install the Anionu <code>surveillancemodeplugin</code>:</p>

<pre class="highlight shell">pacm --endpoint https://anionu.com --uri /packages.json --print --install surveillancemodeplugin
</pre>

<p>Uninstall the Anionu <code>surveillancemodeplugin</code>:</p>

<pre class="highlight shell">pacm --endpoint https://anionu.com --uri /packages.json --print --install surveillancemodeplugin
</pre>

<p>Update installed packages to the latest version:</p>

<pre class="highlight shell">pacm --endpoint https://anionu.com --uri /packages.json --print --update
</pre>

<h3 id="supported-commands">Supported Commands</h3>

<p>The following commands are implemented by the redistributable application. This is likely to be expanded upon in the near future, and in the mean time pull requests are very welcome:</p>

<pre class="highlight plaintext">General commands:

  --help           Print help
  --logfile        Log file output path

Server commands:

  --endpoint       HTTP server endpoint
  --uri            HTTP server package JSON index URI

Package commands:

  --install        Packages to install (comma separated)
  --uninstall      Packages to uninstall (comma separated)
  --update         Update all packages
  --print          Print all local and remote packages on exit
  --checksum-alg   Checksum algorithm for verifying packages (MDS/SHA1)

Filesystem commands:

  --install-dir    Directory where packages will be installed
  --data-dir       Directory where package manifests will be stored
  --temp-dir       Directory where intermediate package files will be stored
</pre>

<h2 id="client-server-protocol">Client-Server Protocol</h2>

<p>The Pacm repository does not currently include a server module, but since everything is in JSON it should be a sinch to implement using your existing web framework. All that is required on the server-side is to list packages and facilitate downloads.</p>

<p>An example of a server response to a Pacm query is illustrated below. Pacm will send a HTTP GET request to the server which will reply with a JSON response that looks like this:</p>

<pre class="highlight javascript"><span class="p">[{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"surveillancemodeplugin"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"Plugin"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Surveillance Mode Plugin"</span><span class="p">,</span>
    <span class="s2">"author"</span><span class="p">:</span> <span class="s2">"Sourcey"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Surveillance mode provides Spot with real-time motion detection capabilities. Surveillance mode is ideal for when you are away from the surveilled premises, and want to protect yourself against unwanted intruders. You can also configure SMS alerts and record videos during intervals of motion."</span><span class="p">,</span>
    <span class="s2">"assets"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"0.9.3"</span><span class="p">,</span>
        <span class="s2">"sdk-version"</span><span class="p">:</span> <span class="s2">"0.6.2"</span><span class="p">,</span>
        <span class="s2">"platform"</span><span class="p">:</span> <span class="s2">"win32"</span><span class="p">,</span>
        <span class="s2">"file-name"</span><span class="p">:</span> <span class="s2">"surveillancemodeplugin-0.9.4-sdk-0.6.2-win32.zip"</span><span class="p">,</span>
        <span class="s2">"file-size"</span><span class="p">:</span> <span class="mi">432321</span><span class="p">,</span>
        <span class="s2">"mirrors"</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://anionu.com/packages/surveillancemodeplugin/download/surveillancemodeplugin-0.9.4-sdk-0.6.2-win32.zip"</span>
        <span class="p">}]</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"0.9.3"</span><span class="p">,</span>
        <span class="s2">"sdk-version"</span><span class="p">:</span> <span class="s2">"0.6.0"</span><span class="p">,</span>
        <span class="s2">"platform"</span><span class="p">:</span> <span class="s2">"win32"</span><span class="p">,</span>
        <span class="s2">"file-name"</span><span class="p">:</span> <span class="s2">"surveillancemodeplugin-0.9.3-sdk-0.6.0-win32-debug.zip"</span><span class="p">,</span>
        <span class="s2">"file-size"</span><span class="p">:</span> <span class="mi">432221</span><span class="p">,</span>
        <span class="s2">"mirrors"</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://anionu.com/packages/surveillancemodeplugin/download/surveillancemodeplugin-0.9.3-sdk-0.6.0-win32-debug.zip"</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"mediaplugin"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"Plugin"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Media Plugin"</span><span class="p">,</span>
    <span class="s2">"author"</span><span class="p">:</span> <span class="s2">"Sourcey"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The Media Plugin implements audio and video encoders for recording and real-time media streaming. If you want to enable different media formats in Spot, you can do so by modifying this plugin."</span><span class="p">,</span>
    <span class="s2">"assets"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"0.8.9"</span><span class="p">,</span>
        <span class="s2">"sdk-version"</span><span class="p">:</span> <span class="s2">"0.6.2"</span><span class="p">,</span>
        <span class="s2">"platform"</span><span class="p">:</span> <span class="s2">"win32"</span><span class="p">,</span>
        <span class="s2">"file-name"</span><span class="p">:</span> <span class="s2">"mediaplugin-0.8.9-sdk-0.6.2-win32.zip"</span><span class="p">,</span>
        <span class="s2">"file-size"</span><span class="p">:</span> <span class="mi">1352888</span><span class="p">,</span>
        <span class="s2">"mirrors"</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://anionu.com/packages/mediaplugin/download/mediaplugin-0.8.9-sdk-0.6.2-win32.zip"</span>
        <span class="p">}]</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"0.8.8"</span><span class="p">,</span>
        <span class="s2">"sdk-version"</span><span class="p">:</span> <span class="s2">"0.6.0"</span><span class="p">,</span>
        <span class="s2">"platform"</span><span class="p">:</span> <span class="s2">"win32"</span><span class="p">,</span>
        <span class="s2">"file-name"</span><span class="p">:</span> <span class="s2">"mediaplugin-0.8.8-sdk-0.6.0-win32-debug.zip"</span><span class="p">,</span>
        <span class="s2">"file-size"</span><span class="p">:</span> <span class="mi">1352818</span><span class="p">,</span>
        <span class="s2">"mirrors"</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://anionu.com/packages/mediaplugin/download/mediaplugin-0.8.8-sdk-0.6.0-win32-debug.zip"</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"webrtcplugin"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"Plugin"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"WebRTC Plugin"</span><span class="p">,</span>
    <span class="s2">"author"</span><span class="p">:</span> <span class="s2">"Sourcey"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"This plugin provides Spot with WebRTC support, so you can view high quality video surveillance streams in a modern web browser."</span><span class="p">,</span>
    <span class="s2">"assets"</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"0.1.1"</span><span class="p">,</span>
        <span class="s2">"sdk-version"</span><span class="p">:</span> <span class="s2">"0.6.2"</span><span class="p">,</span>
        <span class="s2">"platform"</span><span class="p">:</span> <span class="s2">"win32"</span><span class="p">,</span>
        <span class="s2">"file-name"</span><span class="p">:</span> <span class="s2">"webrtcplugin-0.1.1-sdk-0.6.2-win32.zip"</span><span class="p">,</span>
        <span class="s2">"file-size"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">"mirrors"</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://anionu.com/packages/webrtcplugin/download/webrtcplugin-0.1.1-sdk-0.6.2-win32.zip"</span>
        <span class="p">}]</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">"version"</span><span class="p">:</span> <span class="s2">"0.1.0"</span><span class="p">,</span>
        <span class="s2">"sdk-version"</span><span class="p">:</span> <span class="s2">"0.6.0"</span><span class="p">,</span>
        <span class="s2">"platform"</span><span class="p">:</span> <span class="s2">"win32"</span><span class="p">,</span>
        <span class="s2">"file-name"</span><span class="p">:</span> <span class="s2">"webrtcplugin-0.1.0-sdk-0.6.0-win32-debug.zip"</span><span class="p">,</span>
        <span class="s2">"file-size"</span><span class="p">:</span> <span class="mi">3888157</span><span class="p">,</span>
        <span class="s2">"mirrors"</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://anionu.com/packages/webrtcplugin/download/webrtcplugin-0.1.0-sdk-0.6.0-win32-debug.zip"</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">}]</span>
</pre>

<h2 id="contributing">Contributing</h2>

<ol>
  <li><a href="https://github.com/sourcey/pacm">Fork Pacm on Github</a></li>
  <li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
  <li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
  <li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
  <li>Create new Pull Request</li>
</ol>

<h2 id="issues">Issues</h2>

<p>If you find any bugs or issues please use the new <a href="https://github.com/sourcey/pacm/issues">Github issue tracker</a>.</p>
 
    </div>
        
    <!--
    <div style="text-align: center">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>  -->
    <!-- Sourcey Small H --><!--
    <ins class="adsbygoogle"
         style="display:inline-block;width:468px;height:60px;margin: 30px auto 15px;"
         data-ad-client="ca-pub-1397369873900370"
         data-ad-slot="8968503286"></ins>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    </div>
    -->

    <footer id="footer">
      <p>
        As with all business minded artists, we have fought the inevitable battle of conformity vs expression, and have emerged victorious with sanity intact to plunder the digiverse in search of new and interesting challenges. For more information, or a quote, drop us an email and tell us what you're working on.
      </p>
      <!--
      <p>                     
        Our Kung Fu includes and is not limited to: C++, Ruby, Python, Java, Php, JavaScript, Node.js, ActionScript, HTML, CSS and Photoshop.
      <p>  
       -->      	  
      <p>
      &copy;2014 Sourcey     
      <p>  
    </footer>
      
    <link href="/stylesheets/app.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
  </body>
</html>
